{% extends 'base.html' %}

{% block title %}Dashboard{% endblock title %}

{% block content %}
  <h1>Dashboard</h1>

  <h2>
    Categories
    <a href="{% url 'knowledgebase:dashboard_category_create' %}">
      <small>Create</small>
    </a>
  </h2>
  <div class="table-responsive">
    <table class="table table-bordered table-hover">
      <thead>
        <tr>
          <td>Title</td>
          <td>Author</td>
          <td>Options</td>
        </tr>
      </thead>

      <tbody>
        {% for category in categories_list %}
          <tr>
            <td>{{ category.title }}</td>
            <td>{{ category.author.username }}</td>
            <td>
              <a href="{{ category.get_absolute_url }}" target="_blank">View</a>
              |
              <a href="{% url 'knowledgebase:dashboard_category_update' category.pk %}">Update</a>
              |
              <a href="{% url 'knowledgebase:dashboard_category_delete' category.pk %}">Delete</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <h2>
    Articles
    <a href="{% url 'knowledgebase:dashboard_article_create' %}">
      <small>Create</small>
    </a>
  </h2>
  <div class="table-responsive">
    <table class="table table-bordered table-hover">
      <thead>
        <tr>
          <td>Title</td>
          <td>Author</td>
          <td>Status</td>
          <td>Category</td>
          <td>Tags</td>
          <td>Options</td>
        </tr>
      </thead>

      <tbody>
        {% for article in articles_list %}
          <tr>
            <td>{{ article.title }}</td>
            <td>{{ article.author.username }}</td>
            <td>{{ article.get_status_display }}</td>
            <td>{{ article.category.title }}</td>
            <td>
              {% for tag in article.tags.names %}
                <span>{{ tag }}</span>
              {% endfor %}
            </td>
            <td>
              <a href="{{ article.get_absolute_url }}" target="_blank">View</a>
              |
              <a href="{% url 'knowledgebase:dashboard_article_update' article.pk %}">Update</a>
              |
              <a href="{% url 'knowledgebase:dashboard_article_delete' article.pk %}">Delete</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
